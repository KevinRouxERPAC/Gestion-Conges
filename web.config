<?xml version="1.0" encoding="utf-8"?>
<!--
  Configuration IIS pour Gestion Conges (HttpPlatformHandler + Waitress).
  IMPORTANT :
  - Site en HTTP ou HTTPS : en HTTPS, PREFERRED_URL_SCHEME=https est defini ci-dessous.
  - Chemin physique du site dans IIS : ce dossier (ex. C:\Sites\Gestion-Conges).
  - Creer le dossier "logs" a la racine (droits ecriture pour le pool IIS).
  - processPath = python.exe du venv, arguments = run_wsgi.py (evite 0x8007000d avec .bat).
-->
<configuration>
  <system.webServer>
    <handlers>
      <add name="httpPlatformHandler" path="*" verb="*" modules="httpPlatformHandler" resourceType="Unspecified" />
    </handlers>
    <httpPlatform processPath="C:\Windows\System32\cmd.exe" arguments="/c C:\Sites\Gestion-Conges\run_wsgi_wrapper.cmd" stdoutLogEnabled="true" stdoutLogFile="C:\Sites\Gestion-Conges\logs\stdout.log" startupTimeLimit="90">
      <environmentVariables>
        <environmentVariable name="SECRET_KEY" value="f919c6dd70e96be743d3be13e094112f0a4724dcd2b60aa8532546e78b7c155c" />
        <environmentVariable name="PYTHONUNBUFFERED" value="1" />
        <environmentVariable name="PREFERRED_URL_SCHEME" value="https" />
      </environmentVariables>
    </httpPlatform>
  </system.webServer>
</configuration>





